{"version":3,"sources":["../../src/routes/routes.js"],"names":["routes","BrokerService","require","pjson","config","brokerService","get","req","res","render","title","version","sendStatus","post","console","log","header","addToTradeQueue","body","then","response","end","JSON","stringify","catch","err","error","addToMarketDataQueue"],"mappings":";;;;;;AAAA;;AAEA,MAAMA,SAAS,sBAAf;AACA,MAAMC,gBAAgBC,QAAQ,0BAAR,CAAtB;AACA,MAAMC,QAAQD,QAAQ,oBAAR,CAAd;AACA,MAAME,SAASF,QAAQ,QAAR,CAAf;;AAEA,MAAMG,gBAAgB,IAAIJ,aAAJ,EAAtB;;AAEA;;;AAGAD,OAAOM,GAAP,CAAW,GAAX,EAAgB,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC5BA,MAAIC,MAAJ,CAAW,OAAX,EAAoB,EAAEC,OAAO,gBAAT,EAA2B,WAAWP,MAAMQ,OAA5C,EAApB;AACD,CAFD;;AAIAX,OAAOM,GAAP,CAAWF,OAAOE,GAAP,CAAW,0BAAX,CAAX,EAAmD,UAASC,GAAT,EAAcC,GAAd,EAAmB;AACpEA,MAAII,UAAJ,CAAe,GAAf;AACD,CAFD;;AAIA;;;AAGAZ,OAAOa,IAAP,CAAY,kBAAZ,EAAgC,CAACN,GAAD,EAAMC,GAAN,KAAc;AAC5CM,UAAQC,GAAR,CAAY,qBAAZ;AACAP,MAAIQ,MAAJ,CAAW,6BAAX,EAA0C,GAA1C;AACAR,MAAIQ,MAAJ,CAAW,8BAAX,EAA2C,gDAA3C;AACAX,gBAAcY,eAAd,CAA8BV,IAAIW,IAAlC,EAAwCC,IAAxC,CAA8CC,YAAY;AACxDZ,QAAIa,GAAJ,CAAQC,KAAKC,SAAL,CAAeH,QAAf,CAAR;AACD,GAFD,EAEGI,KAFH,CAESC,OAAO;AACdX,YAAQY,KAAR,CAAcD,GAAd;AACAjB,QAAIa,GAAJ,CAAQC,KAAKC,SAAL,CAAeE,GAAf,CAAR;AACD,GALD;AAMD,CAVD;;AAYA;;;AAGAzB,OAAOa,IAAP,CAAY,uBAAZ,EAAqC,CAACN,GAAD,EAAMC,GAAN,KAAc;AACjDA,MAAIQ,MAAJ,CAAW,6BAAX,EAA0C,GAA1C;AACAR,MAAIQ,MAAJ,CAAW,8BAAX,EAA2C,gDAA3C;AACAX,gBAAcsB,oBAAd,CAAmCpB,IAAIW,IAAvC,EAA6CC,IAA7C,CAAmDC,YAAY;AAC7DZ,QAAIa,GAAJ,CAAQC,KAAKC,SAAL,CAAeH,QAAf,CAAR;AACD,GAFD,EAEGI,KAFH,CAESC,OAAO;AACdX,YAAQY,KAAR,CAAcD,GAAd;AACAjB,QAAIa,GAAJ,CAAQC,KAAKC,SAAL,CAAeE,GAAf,CAAR;AACD,GALD;AAMD,CATD;;kBAWezB,M","file":"routes.js","sourcesContent":["import { Router } from 'express';\r\n\r\nconst routes = Router();\r\nconst BrokerService = require('../service/brokerService');\r\nconst pjson = require('../../package.json');\r\nconst config = require('config')\r\n\r\nconst brokerService = new BrokerService();\r\n\r\n/**\r\n * GET home page\r\n */\r\nroutes.get('/', (req, res) => {\r\n  res.render('index', { title: 'Message Broker', 'version': pjson.version});\r\n});\r\n\r\nroutes.get(config.get('appConfig.healthCheckUrl'), function(req, res) {\r\n  res.sendStatus(200);\r\n});\r\n\r\n/**\r\n * Add message to trade exchange\r\n */\r\nroutes.post('/addToTradeQueue', (req, res) => {\r\n  console.log('in /addToTradeQueue')\r\n  res.header(\"Access-Control-Allow-Origin\", \"*\");\r\n  res.header(\"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept\");  \r\n  brokerService.addToTradeQueue(req.body).then( response => {    \r\n    res.end(JSON.stringify(response))\r\n  }).catch(err => {\r\n    console.error(err)    \r\n    res.end(JSON.stringify(err));\r\n  })\r\n});\r\n\r\n/**\r\n * Add message to market data exchange\r\n */\r\nroutes.post('/addToMarketDataQueue', (req, res) => {  \r\n  res.header(\"Access-Control-Allow-Origin\", \"*\");\r\n  res.header(\"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept\");  \r\n  brokerService.addToMarketDataQueue(req.body).then( response => {    \r\n    res.end(JSON.stringify(response))\r\n  }).catch(err => {\r\n    console.error(err)    \r\n    res.end(JSON.stringify(err));\r\n  })\r\n});\r\n\r\nexport default routes;\r\n"]}